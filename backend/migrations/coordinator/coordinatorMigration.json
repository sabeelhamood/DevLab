{
  "migrationFile": {
    "version": "1.0.0",
    "description": "DevLab is an AI-powered coding practice, assessment, and competition microservice. It generates coding questions, evaluates code solutions, produces test cases, detects AI-generated code (fraud detection), creates AI-vs-learner competitions, and generates interactive HTML components with CodeMirror.",
    "dependencies": [
      "content-studio",
      "assessment",
      "learning-analytics",
      "course-builder"
    ],
    "api": {
      "endpoints": [
        {
          "path": "/api/fill-content-metrics/",
          "method": "POST",
          "description": "Coordinator proxy endpoint for filling content metrics. Accepts data requests from Coordinator and routes them to appropriate handlers.",
          "requestSchema": {
            "type": "object",
            "properties": {
              "requester_service": {
                "type": "string",
                "description": "Service identifier (e.g., 'content-studio', 'assessment', 'analytics', 'course-builder')"
              },
              "payload": {
                "type": "object",
                "description": "Request payload containing action and relevant parameters"
              },
              "response": {
                "type": "object",
                "properties": {
                  "answer": {
                    "type": "string",
                    "description": "Response answer field to be populated"
                  }
                }
              }
            },
            "required": ["requester_service", "payload", "response"]
          },
          "responseSchema": {
            "type": "object",
            "properties": {
              "requester_service": {
                "type": "string"
              },
              "payload": {
                "type": "object"
              },
              "response": {
                "type": "object",
                "properties": {
                  "answer": {
                    "type": "string",
                    "description": "Contains HTML component for code questions or JSON for other responses"
                  }
                }
              }
            }
          }
        },


        {
          "path": "/api/judge0",
          "method": "POST",
          "description": "Code execution endpoint using Judge0 sandbox service.",
          "requestSchema": {
            "type": "object",
            "properties": {
              "source_code": { "type": "string" },
              "language_id": { "type": "number" },
              "stdin": { "type": "string" }
            }
          }
        }
      ]
    },

    "capabilities": [
      "generate coding exercises",
      "generate theoretical questions",
      "produce test cases",
      "evaluate coding submissions",
      "create AI-vs-learner competitions",
      "validate trainer-authored questions",
      "provide AI-powered hints for coding questions",
      "detect AI-generated code solutions (fraud detection)",
      "execute code in secure sandbox environment",
      "generate HTML components for interactive coding questions",
      "transform trainer exercises into validated question format",
      "generate question feedback and solutions",
      "store and retrieve temporary questions",
      "save questions to persistent database"
    ],

    "database": {
      "tables": [
      ]
    },

    "events": {
      "publishes": [
        {
          "name": "devlab.question.generated",
          "description": "Published when a new question is successfully generated and saved",
          "payload": {
            "question_id": "uuid",
            "topic_id": "uuid",
            "question_type": "string",
            "source": "string"
          }
        },
        {
          "name": "devlab.competition.completed",
          "description": "Published when an AI-vs-learner competition is completed",
          "payload": {
            "competition_id": "uuid",
            "learner_id": "uuid",
            "winner": "string",
            "score": "number"
          }
        }
      ],
      "subscribes": [
        {
          "name": "content.topic.created",
          "description": "Subscribes to topic creation events to prepare question generation context",
          "handler": "Internal topic sync handler"
        },
        {
          "name": "course.completion",
          "description": "Subscribes to course completion events from Course Builder to trigger competition invitations",
          "handler": "course-builder fill-content-metrics handler"
        }
      ]
    }
  }
}
